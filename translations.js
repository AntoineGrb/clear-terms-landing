const translations = {
  fr: {
    // Meta
    title: "Clear Terms - Analysez vos CGU en toute transparence",
    description: "Scannez et comprenez instantanément les conditions d'utilisation de n'importe quel site web grâce à l'IA. Simple, rapide et transparent.",

    // Navigation
    navFeatures: "Fonctionnalités",
    navHowItWorks: "Comment ça marche",
    navPricing: "Tarifs",
    navInstall: "Installer",
    backToHome: "← Retour à l'accueil",

    // Hero
    heroBadge: "10 scans gratuits à l'installation",
    heroTitle: "Comprenez enfin les <span class='gradient-text'>CGU</span> en 30 secondes.",
    heroSubtitle: "Clear Terms analyse instantanément les CGU et vous révèle les clauses cachées. Voyez immédiatement ce qui est acceptable, ambigu ou risqué.",
    heroCtaPrimary: "Installer gratuitement",
    heroCtaSecondary: "Voir la démo",
    heroSocialProof: "<span class='font-semibold text-gray-900'>1,000+</span> utilisateurs font confiance à Clear Terms",

    // Features
    featuresTitle: "Pourquoi <span class='gradient-text'>Clear Terms</span> ?",
    featuresSubtitle: "Simple, rapide, et transparent",

    feature1Title: "Résultat en 5 secondes",
    feature1Desc: "Obtenez une note et un résumé clair grâce à l'intelligence artificielle.",

    feature2Title: "Détection intelligente",
    feature2Desc: "L'extension détecte automatiquement les pages de CGU et vous alerte.",

    feature3Title: "Score de confiance de A à E",
    feature3Desc: "Voyez d'un coup d'œil si le site respecte vos données et vos droits.",

    feature4Title: "Alerte sur les principaux risques",
    feature4Desc: "Collection de données, clauses abusives, pistage publicitaire... Tout est mis en lumière.",

    feature5Title: "Respect de la vie privée",
    feature5Desc: "Vos données restent privées. Zéro tracking, zéro revente.",

    feature6Title: "Historique consultable",
    feature6Desc: "Retrouvez vos rapports à tout moment. Relancez une analyse quand vous le souhaitez.",

    // How it works
    howTitle: "Comment ça <span class='gradient-text'>fonctionne</span> ?",
    howSubtitle: "En 3 étapes simples",

    step1Title: "Installez l'extension",
    step1Desc: "Gratuite. 10 analyses offertes. Sans compte ni carte bancaire.",

    step2Title: "Naviguez normalement",
    step2Desc: "Sur une page de CGU, vous êtes alerté et vous pouvez lancer une analyse.",

    step3Title: "Décrypter en quelques secondes",
    step3Desc: "Score, points clés et résumé en un clin d'œil.",

    // Pricing
    pricingBadge: "Tarification transparente",
    pricingTitle: "Commencez <span class='gradient-text'>gratuitement</span>",
    pricingSubtitle: "10 analyses offertes à l'installation. Rechargez uniquement si besoin.",

    pricingFeature1: "10 scans offerts sans carte bancaire",
    pricingFeature2: "Historique illimité et gratuit",
    pricingFeature3: "Recharges dès 2€ (sans engagement)",
    pricingFeature4: "Pas d'abonnement, payez ce que vous utilisez",

    pricingFrom: "À partir de",
    pricingAmount: "2€",
    pricingScans: "10 analyses supplémentaires",
    pricingPacksTitle: "Packs disponibles",
    pricingPack1: "10 scans • 2€",
    pricingPack2: "30 scans • 5€",
    pricingPack3: "100 scans • 10€",
    pricingCta: "Commencer gratuitement",

    // CTA
    ctaTitle: "Reprenez le contrôle de vos données",
    ctaSubtitle: "Installez Clear Terms et ne signez plus à l'aveugle.",
    ctaButton: "Installer maintenant gratuitement",
    ctaBenefits: "✓ Installation instantanée • ✓ 10 scans offerts • ✓ Aucun compte requis",

    // Footer
    footerTagline: "Analysez vos CGU en toute transparence grâce à l'intelligence artificielle.",
    footerQuickLinks: "Liens rapides",
    footerContact: "Contact",
    footerTerms: "Conditions d'utilisation",
    footerPrivacy: "Politique de confidentialité",
    footerCopyright: "© 2025 Clear Terms. Tous droits réservés.",

    // Demo cards
    demoSecurity: "Sécurité",
    demoSecurityDesc: "Chiffrement AES-256, données sécurisées",
    demoSharing: "Partage",
    demoSharingDesc: "Données partagées avec des partenaires publicitaires",
    demoRetention: "Rétention",
    demoRetentionDesc: "Conservation indéfinie des données personnelles",

    // Extension mockup
    mockupHeader: "Clear Terms",
    mockupSubheader: "Analyse IA des CGU",
    mockupButton: "Analyser cette page",
    mockupSite: "Facebook",
    mockupDataSharing: "Partage de données",
    mockupDataSharingDesc: "Vos données sont partagées avec des milliers de partenaires...",
    mockupTargetedAds: "Publicité ciblée",
    mockupTargetedAdsDesc: "Profil publicitaire créé basé sur votre activité...",

    // Terms page
    termsBackToHome: "← Retour à la page",
    termsTitle: "Conditions de Service",
    termsEffectiveDate: "Date d'effet : 6 octobre 2025",
    termsIntro1: "Bienvenue sur Clear Terms, un outil conçu pour aider les utilisateurs à mieux comprendre les conditions d'utilisation et politiques de confidentialité des services numériques. En installant ou en utilisant l'extension Clear Terms, vous acceptez d'être lié par les présentes Conditions de Service.",
    termsIntro2: "Veuillez les lire attentivement.",

    terms1Title: "1. Présentation",
    terms1Content: "Clear Terms est un outil qui identifie les clauses clés et les risques couramment présents dans les conditions d'utilisation et politiques de confidentialité en ligne. Il fournit une évaluation de risque et une analyse basées sur des documents publics. Nous nous efforçons d'aider les utilisateurs à prendre des décisions éclairées, mais nous ne pouvons garantir l'exhaustivité ou l'exactitude juridique dans tous les contextes.",

    terms2Title: "2. Absence de conseil juridique",
    terms2Content1: "Clear Terms n'est pas un cabinet d'avocats, et les informations fournies via l'extension ne constituent pas un conseil juridique.",
    terms2Content2: "Vous comprenez et acceptez que :",
    terms2Li1: "Clear Terms ne remplace pas la consultation d'un avocat qualifié.",
    terms2Li2: "Les alertes, exemples et résumés que nous fournissons sont uniquement informatifs et peuvent ne pas s'appliquer à votre situation spécifique.",
    terms2Li3: "Si vous avez besoin de conseils juridiques ou d'une représentation légale, vous devez contacter un avocat agréé dans votre juridiction.",
    terms2Li4: "L'utilisation de Clear Terms ne crée pas de relation avocat-client.",

    terms3Title: "3. Comptes utilisateur et données",
    terms3Content: "Nous collectons uniquement le minimum de données nécessaire pour fournir le service. Actuellement, aucune donnée personnelle identifiable n'est collectée. Les analyses sont mises en cache de manière anonyme (par hash du contenu) pour améliorer les performances. Ces données ne sont jamais vendues ou partagées avec des tiers.",

    terms4Title: "4. Exactitude et limitations",
    terms4Content: "Bien que nous visions à fournir des informations précises et à jour :",
    terms4Li1: "Nous ne garantissons pas l'exhaustivité, l'exactitude ou la force exécutoire juridique de tout résumé ou évaluation de risque fourni.",
    terms4Li2: "Les conditions d'utilisation changent fréquemment, et notre base de données peut ne pas toujours refléter la version la plus récente d'une politique donnée.",
    terms4Li3: "Notre analyse est basée sur des processus de révision automatisés et manuels, qui peuvent avoir des limitations ou des cas particuliers.",

    terms5Title: "5. Propriété intellectuelle",
    terms5Content: "Le nom Clear Terms, le logo, le logiciel et le contenu original sont la propriété intellectuelle de ses créateurs. Vous ne pouvez pas :",
    terms5Li1: "Faire de la rétro-ingénierie ou réutiliser l'extension",
    terms5Li2: "Revendre ou distribuer notre analyse sans permission",
    terms5Li3: "Présenter nos résumés comme des avis juridiques",

    terms6Title: "6. Conduite de l'utilisateur",
    terms6Content: "Vous acceptez de ne pas :",
    terms6Li1: "Utiliser l'extension de manière abusive pour du scraping, de l'automation ou du spam",
    terms6Li2: "Tenter de modifier le comportement de l'extension",
    terms6Li3: "Prétendre que les informations fournies par Clear Terms constituent une autorité juridique",

    terms7Title: "7. Résiliation",
    terms7Content: "Nous nous réservons le droit de suspendre ou de résilier votre accès à l'extension si :",
    terms7Li1: "Vous violez ces conditions",
    terms7Li2: "Vous utilisez l'extension d'une manière qui nuit à autrui, viole la loi ou compromet l'intégrité du service",

    terms8Title: "8. Exclusion de garanties",
    terms8Content: "L'extension Clear Terms est fournie \"en l'état\" et \"selon disponibilité\" sans garanties d'aucune sorte. Nous déclinons toutes garanties expresses ou implicites, y compris, mais sans s'y limiter :",
    terms8Li1: "Qualité marchande",
    terms8Li2: "Adéquation à un usage particulier",
    terms8Li3: "Non-violation",
    terms8Content2: "Nous ne garantissons pas que l'extension sera exempte d'erreurs, ininterrompue ou totalement exacte.",

    terms9Title: "9. Limitation de responsabilité",
    terms9Content: "Dans toute la mesure permise par la loi, Clear Terms (et ses créateurs, équipe et affiliés) ne pourra être tenu responsable de :",
    terms9Li1: "Tout dommage indirect, accessoire ou consécutif",
    terms9Li2: "Toute perte de données, de profit ou d'opportunité commerciale",
    terms9Li3: "Toute décision que vous prenez sur la base de notre contenu",
    terms9Content2: "Votre seul recours en cas d'insatisfaction avec le service est de cesser de l'utiliser.",

    terms10Title: "10. Droit applicable et conformité",
    terms10Content: "Ces conditions sont régies et interprétées conformément aux lois françaises et aux réglementations européennes, notamment le Règlement Général sur la Protection des Données (RGPD). Nous nous engageons à protéger vos données personnelles conformément au RGPD et à respecter vos droits d'accès, de rectification, d'effacement et de portabilité des données. Tout litige sera traité exclusivement par les tribunaux compétents en France.",

    terms11Title: "11. Modifications de ces conditions",
    terms11Content: "Nous pouvons mettre à jour ces Conditions de Service de temps à autre. Si nous apportons des modifications importantes, nous vous en informerons via l'extension avec un délai de préavis de 30 jours. Si vous n'acceptez pas les nouvelles conditions, vous pouvez cesser d'utiliser l'extension en la désinstallant avant l'entrée en vigueur des modifications. L'utilisation continue du service après ce délai constitue votre acceptation des nouvelles conditions.",

    terms12Title: "12. Paiement et crédits",
    terms12Content: "Clear Terms fonctionne sur un système de crédits d'analyse. Les 10 premières analyses sont gratuites pour découvrir le service.",
    terms12Sub1: "Achat de crédits",
    terms12Sub1Li1: "Les crédits sont achetés via notre système de paiement sécurisé et sont associés à votre navigateur.",
    terms12Sub1Li2: "Les crédits n'expirent pas et peuvent être utilisés à votre rythme.",
    terms12Sub1Li3: "Chaque analyse consomme 1 crédit. Les analyses déjà en cache (effectuées précédemment) sont accessibles gratuitement.",
    terms12Sub1Li4: "Les prix et formules sont disponibles sur la page d'achat et peuvent être modifiés à tout moment avec un préavis de 30 jours pour les modifications significatives.",
    terms12Sub2: "Remboursement et annulation",
    terms12Sub2Li1: "Les crédits achetés ne sont pas remboursables, sauf en cas de défaut technique majeur du service.",
    terms12Sub2Li2: "Si une analyse échoue pour une raison technique imputable au service, le crédit vous sera automatiquement recrédité.",
    terms12Sub2Li3: "En cas de litige concernant une transaction, vous disposez d'un délai de 14 jours pour nous contacter.",
    terms12Sub3: "Sécurité des paiements",
    terms12Sub3Li1: "Tous les paiements sont traités par des prestataires de paiement sécurisés conformes aux normes PCI-DSS.",
    terms12Sub3Li2: "Nous ne stockons aucune information bancaire ou de carte de crédit sur nos serveurs.",
    terms12Sub3Li3: "Vous recevrez un reçu pour chaque achat effectué.",
    terms12Sub4: "Modifications tarifaires",
    terms12Sub4Content: "Nous nous réservons le droit de modifier nos tarifs à tout moment. Les crédits déjà achetés restent valables et ne sont pas affectés par les changements de prix futurs.",

    terms13Title: "13. Contact",
    terms13Content: "Questions ou préoccupations ? Contactez-nous à :",

    termsLastUpdate: "Dernière mise à jour : 20 octobre 2025",
    termsFooterTagline: "Analysez vos CGU en toute transparence grâce à l'intelligence artificielle.",
  },

  en: {
    // Meta
    title: "Clear Terms - Analyze your Terms of Service in transparency",
    description: "Scan and instantly understand the terms of service of any website using AI. Simple, fast and transparent.",

    // Navigation
    navFeatures: "Features",
    navHowItWorks: "How it works",
    navPricing: "Pricing",
    navInstall: "Install",
    backToHome: "← Back to home",

    // Hero
    heroBadge: "10 free scans at installation",
    heroTitle: "Understand your <span class='gradient-text'>Terms</span> in 30 seconds.",
    heroSubtitle: "Clear Terms instantly analyzes Terms & Conditions and reveals hidden clauses. Instantly see what's acceptable, ambiguous or risky.",
    heroCtaPrimary: "Install for free",
    heroCtaSecondary: "See demo",
    heroSocialProof: "<span class='font-semibold text-gray-900'>1,000+</span> users trust Clear Terms",

    // Features
    featuresTitle: "Why <span class='gradient-text'>Clear Terms</span>?",
    featuresSubtitle: "Simple, fast, and transparent",

    feature1Title: "Instant understanding",
    feature1Desc: "Get a score and clear summary with AI assistance.",

    feature2Title: "Automatic detection",
    feature2Desc: "The extension automatically detects ToS pages and alerts you.",

    feature3Title: "A to E trust score",
    feature3Desc: "See at a glance if the site respects your data and rights.",

    feature4Title: "Risk alerts",
    feature4Desc: "Data collection, abusive clauses, ad tracking... Everything is highlighted.",

    feature5Title: "Privacy respect",
    feature5Desc: "Your data remains private. No tracking, no data reselling.",

    feature6Title: "Searchable history",
    feature6Desc: "Find your reports anytime. Re-run an analysis whenever you want.",

    // How it works
    howTitle: "How does it <span class='gradient-text'>work</span>?",
    howSubtitle: "In 3 simple steps",

    step1Title: "Install the extension",
    step1Desc: "Free. 10 analyses offered. No account or credit card needed.",

    step2Title: "Browse as usual",
    step2Desc: "On a ToS page, you're alerted and can launch an analysis.",

    step3Title: "Decrypt in seconds",
    step3Desc: "Score, key points and summary at a glance.",

    // Pricing
    pricingBadge: "Transparent pricing",
    pricingTitle: "Start <span class='gradient-text'>for free</span>",
    pricingSubtitle: "10 analyses offered at installation. Buy credits only if you need them.",

    pricingFeature1: "10 free scans, no credit card",
    pricingFeature2: "Unlimited and free history",
    pricingFeature3: "Recharges from €2 (no commitment)",
    pricingFeature4: "No subscription, pay as you go",

    pricingFrom: "From",
    pricingAmount: "€2",
    pricingScans: "10 additional analyses",
    pricingPacksTitle: "Available packs",
    pricingPack1: "10 scans • €2",
    pricingPack2: "30 scans • €5",
    pricingPack3: "100 scans • €10",
    pricingCta: "Start for free",

    // CTA
    ctaTitle: "Take back control of your data",
    ctaSubtitle: "Install Clear Terms and stop signing blindly.",
    ctaButton: "Install now for free",
    ctaBenefits: "✓ Instant installation • ✓ 10 scans offered • ✓ No account required",

    // Footer
    footerTagline: "Analyze your ToS transparently with artificial intelligence.",
    footerQuickLinks: "Quick links",
    footerContact: "Contact",
    footerTerms: "Terms of Service",
    footerPrivacy: "Privacy Policy",
    footerCopyright: "© 2025 Clear Terms. All rights reserved.",

    // Demo cards
    demoSecurity: "Security",
    demoSecurityDesc: "AES-256 encryption, secure data",
    demoSharing: "Sharing",
    demoSharingDesc: "Data shared with advertising partners",
    demoRetention: "Retention",
    demoRetentionDesc: "Indefinite retention of personal data",

    // Extension mockup
    mockupHeader: "Clear Terms",
    mockupSubheader: "AI ToS Analysis",
    mockupButton: "Analyze this page",
    mockupSite: "Facebook",
    mockupDataSharing: "Data sharing",
    mockupDataSharingDesc: "Your data is shared with thousands of partners...",
    mockupTargetedAds: "Targeted advertising",
    mockupTargetedAdsDesc: "Advertising profile created based on your activity...",

    // Terms page
    termsBackToHome: "← Back to home",
    termsTitle: "Terms of Service",
    termsEffectiveDate: "Effective date: October 6, 2025",
    termsIntro1: "Welcome to Clear Terms, a tool designed to help users better understand the terms of service and privacy policies of digital services. By installing or using the Clear Terms extension, you agree to be bound by these Terms of Service.",
    termsIntro2: "Please read them carefully.",

    terms1Title: "1. Overview",
    terms1Content: "Clear Terms is a tool that identifies key clauses and risks commonly found in online terms of service and privacy policies. It provides a risk assessment and analysis based on public documents. We strive to help users make informed decisions, but we cannot guarantee completeness or legal accuracy in all contexts.",

    terms2Title: "2. No Legal Advice",
    terms2Content1: "Clear Terms is not a law firm, and the information provided through the extension does not constitute legal advice.",
    terms2Content2: "You understand and agree that:",
    terms2Li1: "Clear Terms does not replace consultation with a qualified attorney.",
    terms2Li2: "The alerts, examples and summaries we provide are for informational purposes only and may not apply to your specific situation.",
    terms2Li3: "If you need legal advice or legal representation, you should contact a licensed attorney in your jurisdiction.",
    terms2Li4: "Using Clear Terms does not create an attorney-client relationship.",

    terms3Title: "3. User Accounts and Data",
    terms3Content: "We only collect the minimum data necessary to provide the service. Currently, no personally identifiable information is collected. Analyses are cached anonymously (by content hash) to improve performance. This data is never sold or shared with third parties.",

    terms4Title: "4. Accuracy and Limitations",
    terms4Content: "While we aim to provide accurate and up-to-date information:",
    terms4Li1: "We do not guarantee the completeness, accuracy or legal enforceability of any summary or risk assessment provided.",
    terms4Li2: "Terms of service change frequently, and our database may not always reflect the most recent version of a given policy.",
    terms4Li3: "Our analysis is based on automated and manual review processes, which may have limitations or edge cases.",

    terms5Title: "5. Intellectual Property",
    terms5Content: "The Clear Terms name, logo, software and original content are the intellectual property of its creators. You may not:",
    terms5Li1: "Reverse engineer or reuse the extension",
    terms5Li2: "Resell or distribute our analysis without permission",
    terms5Li3: "Present our summaries as legal advice",

    terms6Title: "6. User Conduct",
    terms6Content: "You agree not to:",
    terms6Li1: "Use the extension abusively for scraping, automation or spam",
    terms6Li2: "Attempt to modify the behavior of the extension",
    terms6Li3: "Claim that information provided by Clear Terms constitutes legal authority",

    terms7Title: "7. Termination",
    terms7Content: "We reserve the right to suspend or terminate your access to the extension if:",
    terms7Li1: "You violate these terms",
    terms7Li2: "You use the extension in a way that harms others, violates the law or compromises the integrity of the service",

    terms8Title: "8. Disclaimer of Warranties",
    terms8Content: "The Clear Terms extension is provided \"as is\" and \"as available\" without warranties of any kind. We disclaim all express or implied warranties, including but not limited to:",
    terms8Li1: "Merchantability",
    terms8Li2: "Fitness for a particular purpose",
    terms8Li3: "Non-infringement",
    terms8Content2: "We do not warrant that the extension will be error-free, uninterrupted or completely accurate.",

    terms9Title: "9. Limitation of Liability",
    terms9Content: "To the fullest extent permitted by law, Clear Terms (and its creators, team and affiliates) shall not be liable for:",
    terms9Li1: "Any indirect, incidental or consequential damages",
    terms9Li2: "Any loss of data, profit or business opportunity",
    terms9Li3: "Any decisions you make based on our content",
    terms9Content2: "Your sole remedy for dissatisfaction with the service is to stop using it.",

    terms10Title: "10. Governing Law and Compliance",
    terms10Content: "These terms are governed by and construed in accordance with French law and European regulations, including the General Data Protection Regulation (GDPR). We are committed to protecting your personal data in accordance with GDPR and respecting your rights of access, rectification, erasure and data portability. Any dispute will be handled exclusively by the competent courts in France.",

    terms11Title: "11. Changes to These Terms",
    terms11Content: "We may update these Terms of Service from time to time. If we make significant changes, we will notify you through the extension with 30 days' notice. If you do not accept the new terms, you can stop using the extension by uninstalling it before the changes take effect. Continued use of the service after this period constitutes your acceptance of the new terms.",

    terms12Title: "12. Payment and Credits",
    terms12Content: "Clear Terms operates on an analysis credit system. The first 10 analyses are free to discover the service.",
    terms12Sub1: "Purchasing Credits",
    terms12Sub1Li1: "Credits are purchased through our secure payment system and are associated with your browser.",
    terms12Sub1Li2: "Credits do not expire and can be used at your own pace.",
    terms12Sub1Li3: "Each analysis consumes 1 credit. Analyses already in cache (performed previously) are accessible for free.",
    terms12Sub1Li4: "Prices and packages are available on the purchase page and may be changed at any time with 30 days' notice for significant changes.",
    terms12Sub2: "Refund and Cancellation",
    terms12Sub2Li1: "Purchased credits are non-refundable, except in case of major technical failure of the service.",
    terms12Sub2Li2: "If an analysis fails for a technical reason attributable to the service, the credit will be automatically refunded.",
    terms12Sub2Li3: "In case of a dispute regarding a transaction, you have 14 days to contact us.",
    terms12Sub3: "Payment Security",
    terms12Sub3Li1: "All payments are processed by secure payment providers compliant with PCI-DSS standards.",
    terms12Sub3Li2: "We do not store any bank or credit card information on our servers.",
    terms12Sub3Li3: "You will receive a receipt for each purchase made.",
    terms12Sub4: "Pricing Changes",
    terms12Sub4Content: "We reserve the right to change our pricing at any time. Credits already purchased remain valid and are not affected by future price changes.",

    terms13Title: "13. Contact",
    terms13Content: "Questions or concerns? Contact us at:",

    termsLastUpdate: "Last updated: October 20, 2025",
    termsFooterTagline: "Analyze your ToS transparently with artificial intelligence.",
  }
};

// Détection de la langue du navigateur
function detectLanguage() {
  const saved = localStorage.getItem('clearterms-lang');
  if (saved) return saved;

  const browserLang = navigator.language || navigator.userLanguage;
  return browserLang.startsWith('fr') ? 'fr' : 'en';
}

// Changement de langue
function setLanguage(lang) {
  localStorage.setItem('clearterms-lang', lang);
  document.documentElement.lang = lang;

  // Mettre à jour le titre et la meta description
  document.title = translations[lang].title;
  document.querySelector('meta[name="description"]').content = translations[lang].description;

  // Mettre à jour tous les éléments avec data-i18n
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang][key]) {
      el.innerHTML = translations[lang][key];
    }
  });

  // Mettre à jour le sélecteur de langue
  updateLanguageSelector(lang);
}

// Mettre à jour l'apparence du sélecteur
function updateLanguageSelector(lang) {
  const currentFlag = document.getElementById('current-flag');
  if (currentFlag) {
    currentFlag.textContent = lang === 'fr' ? '🇫🇷' : '🇬🇧';
  }

  // Anciens boutons (pour compatibilité avec terms.html)
  const frFlag = document.getElementById('flag-fr');
  const enFlag = document.getElementById('flag-en');

  if (lang === 'fr') {
    frFlag?.classList.remove('opacity-40');
    enFlag?.classList.add('opacity-40');
  } else {
    enFlag?.classList.remove('opacity-40');
    frFlag?.classList.add('opacity-40');
  }
}

// Initialisation au chargement
document.addEventListener('DOMContentLoaded', () => {
  const currentLang = detectLanguage();
  setLanguage(currentLang);

  // Event listeners pour le changement de langue (ancien style - boutons)
  document.getElementById('lang-fr')?.addEventListener('click', () => setLanguage('fr'));
  document.getElementById('lang-en')?.addEventListener('click', () => setLanguage('en'));

  // Event listeners pour le dropdown (nouveau style)
  const langToggle = document.getElementById('lang-toggle');
  const langMenu = document.getElementById('lang-menu');

  langToggle?.addEventListener('click', (e) => {
    e.stopPropagation();
    langMenu?.classList.toggle('hidden');
  });

  // Fermer le menu si on clique ailleurs
  document.addEventListener('click', () => {
    langMenu?.classList.add('hidden');
  });

  // Gérer le clic sur les options de langue
  document.querySelectorAll('[data-lang]').forEach(button => {
    button.addEventListener('click', (e) => {
      e.stopPropagation();
      const lang = button.getAttribute('data-lang');
      setLanguage(lang);
      langMenu?.classList.add('hidden');
    });
  });
});
